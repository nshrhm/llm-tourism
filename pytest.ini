[pytest]
# pytest設定ファイル
# LLM地域観光紹介性能比較実験システム

# テストディレクトリ
testpaths = tests

# テスト検索パターン
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 出力設定
addopts =
    # 詳細な出力
    -v
    # テスト実行時の警告を表示
    -W default
    # テストサマリー情報を表示
    -ra
    # ローカル変数をトレースバックに表示
    --showlocals
    # 最初の失敗で停止しない（全テストを実行）
    --tb=short
    # doctestも実行（コード内のdocstring例をテスト）
    --doctest-modules
    # src/ディレクトリのみdoctestの対象
    --doctest-glob="*.py"
    # カバレッジレポート設定（オプション）
    # --cov=src
    # --cov-report=term-missing
    # --cov-report=html

# マーカー定義
markers =
    unit: 単体テスト（個別の関数・クラスをテスト）
    integration: 統合テスト（複数のコンポーネント間の連携をテスト）
    api: APIを使用するテスト（実際のAPI呼び出しを含む）
    slow: 実行に時間がかかるテスト
    smoke: スモークテスト（基本的な動作確認）

# テストディスカバリー設定
norecursedirs =
    .git
    .tox
    dist
    build
    *.egg
    venv
    env
    __pycache__
    data
    docs
    scripts

# ログ設定
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# ファイルログ
log_file = tests/test.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s - %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# 警告フィルター
filterwarnings =
    # デフォルトで警告を表示
    default
    # 特定の警告を無視（必要に応じて追加）
    # ignore::DeprecationWarning
    # ignore::PendingDeprecationWarning

# 最小Pythonバージョン
minversion = 3.10

# doctestの設定
doctest_optionflags =
    NORMALIZE_WHITESPACE
    ELLIPSIS
    IGNORE_EXCEPTION_DETAIL

# カバレッジ設定（pytest-covを使用する場合）
# [coverage:run]
# source = src
# omit =
#     */tests/*
#     */venv/*
#     */env/*
#     */__pycache__/*
#
# [coverage:report]
# precision = 2
# show_missing = true
# skip_covered = false
#
# [coverage:html]
# directory = htmlcov
